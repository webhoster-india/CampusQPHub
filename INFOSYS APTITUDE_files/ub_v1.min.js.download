!function(){"use strict";function a(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function b(a){var b=ca.call(a,ea),c=a[ea];try{a[ea]=void 0;var d=!0}catch(a){}var e=da.call(a);return d&&(b?a[ea]=c:delete a[ea]),e}function c(a){return ga.call(a)}function d(a){return null==a?void 0===a?ia:ha:ja&&ja in Object(a)?b(a):c(a)}function e(a){return null!=a&&"object"==typeof a}function f(a){if(!e(a)||d(a)!=la)return!1;var b=ka(a);if(null===b)return!0;var c=pa.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&oa.call(c)==qa}function g(a,b,c){function d(){p===o&&(p=o.slice())}function e(){return n}function h(a){if("function"!=typeof a)throw new Error("Expected listener to be a function.");var b=!0;return d(),p.push(a),function(){if(b){b=!1,d();var c=p.indexOf(a);p.splice(c,1)}}}function i(a){if(!f(a))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===a.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(q)throw new Error("Reducers may not dispatch actions.");try{q=!0,n=m(n,a)}finally{q=!1}for(var b=o=p,c=0;c<b.length;c++){(0,b[c])()}return a}function j(a){if("function"!=typeof a)throw new Error("Expected the nextReducer to be a function.");m=a,i({type:sa.INIT})}function k(){var a,b=h;return a={subscribe:function(a){function c(){a.next&&a.next(e())}if("object"!=typeof a)throw new TypeError("Expected the observer to be an object.");return c(),{unsubscribe:b(c)}}},a[ra]=function(){return this},a}var l;if("function"==typeof b&&void 0===c&&(c=b,b=void 0),void 0!==c){if("function"!=typeof c)throw new Error("Expected the enhancer to be a function.");return c(g)(a,b)}if("function"!=typeof a)throw new Error("Expected the reducer to be a function.");var m=a,n=b,o=[],p=o,q=!1;return i({type:sa.INIT}),l={dispatch:i,subscribe:h,getState:e,replaceReducer:j},l[ra]=k,l}var h,i=(function(){function a(a){this.value=a}function b(b){function c(a,b){return new Promise(function(c,e){var h={key:a,arg:b,resolve:c,reject:e,next:null};g?g=g.next=h:(f=g=h,d(a,b))})}function d(c,f){try{var g=b[c](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){d("next",a)},function(a){d("throw",a)}):e(g.done?"return":"normal",g.value)}catch(a){e("throw",a)}}function e(a,b){switch(a){case"return":f.resolve({value:b,done:!0});break;case"throw":f.reject(b);break;default:f.resolve({value:b,done:!1})}f=f.next,f?d(f.key,f.arg):g=null}var f,g;this._invoke=c,"function"!=typeof b.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke("next",a)},b.prototype.throw=function(a){return this._invoke("throw",a)},b.prototype.return=function(a){return this._invoke("return",a)}}(),function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},l=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},m=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)},n=function(a,b){return{type:"ADD_PENDINGEVENT",payload:l({eventName:a},b)}},o=function(a){return{type:"REMOVE_PENDINGEVENT",payload:{eventId:a}}},p=function(a,b){return{type:"UPDATE_PENDINGEVENT_STATUS",payload:{eventId:a,status:b}}},q=function(a){return{type:"UPDATE_SUPERPROPS",payload:{properties:a}}},r=function(){return{type:"RESET_SUPERPROPS"}},s=function(){return{type:"RESET"}},t=function(a){return{type:"SET_BLACKLIST_EVENTNAMES",payload:{eventNames:a}}},u=function(){return{type:"START_EVENT_QUEUE"}},v=function(){return{type:"FLUSH_EVENT_QUEUE"}},w=null,x=function(a){w=a},y=function(){return w},z=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y().dispatch(q(a))},A=function(){y().dispatch(r())},B=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y().dispatch(n(a,b))},C=function(){var a=new XMLHttpRequest;a.open("GET","/commonConfig"),a.setRequestHeader("Accept","application/json"),a.send(),a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var b=JSON.parse(a.response).blackList;y().dispatch(t(b)),y().dispatch(v())}},y().dispatch(u())},D=Object.freeze({register:z,unRegister:A,track:B,onRouteChange:C}),E={keyPrefix:"ub"},F=function(a){return a+"_"+E.keyPrefix},G=function(a,b){localStorage.setItem(F(a),JSON.stringify(b))},H=function(a){return JSON.parse(localStorage.getItem(F(a)))},I=function(a){localStorage.removeItem(F(a))},J=function(a,b){G(a,b)},K=function(a){return H(a)},L=function(a){I(a)},M=function(a){for(var b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return""},N={keyName:"ubStore",version:4},O={loading:3,done:4,unsent:0,failure:"failure"},P={version:N.version,deviceId:"",eventId:"",eventName:"",pendingEvents:[],events:{},superProps:{deviceType:"WEB",screenReso:window.screen.width+"x"+window.screen.height,url:encodeURIComponent(document.location.href),referrer:encodeURIComponent(document.referrer),pageName:"",appId:0,eventName:"",eventId:"",timestamp:0,refEventName:"",refEventId:""},blackListedEventNames:[],flush_queue:!0,queuedEvents:[]},Q=function(){return M("_t_ds")||a()},R=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,b=arguments[1];switch(b.type){case"RESET":return l({},P,{deviceId:Q()});case"REHYDRATE":var c=b.payload.deviceId;return c||(c=Q()),l({},a,b.payload,{deviceId:c});case"ADD_PENDINGEVENT":var d=a.pendingEvents,e=a.queuedEvents,f=(new Date).getTime(),g=a.deviceId+"-"+f;return a.flush_queue?-1==a.blackListedEventNames.indexOf(b.payload.eventName)&&(d=[].concat(m(a.pendingEvents),[g])):e=[].concat(m(a.queuedEvents),[g]),a.flush_queue?d!=a.pendingEvents?l({},a,{eventId:g,eventName:b.payload.eventName,events:l({},a.events,k({},g,{status:O.unsent,data:l({url:encodeURIComponent(document.location.href),referrer:encodeURIComponent(document.referrer)},a.superProps,{timestamp:f,eventId:g,refEventId:a.eventId,refEventName:a.eventName},b.payload)})),pendingEvents:d}):a:l({},a,{events:l({},a.events,k({},g,{status:O.unsent,data:l({url:encodeURIComponent(document.location.href),referrer:encodeURIComponent(document.referrer)},a.superProps,{timestamp:f,eventId:g,refEventId:"",refEventName:""},b.payload)})),queuedEvents:e});case"UPDATE_PENDINGEVENT_STATUS":return l({},a,{events:l({},a.events,k({},b.payload.eventId,l({},a.events[b.payload.eventId],{status:b.payload.status})))});case"REMOVE_PENDINGEVENT":var h=l({},a.events);return delete h[b.payload.eventId],l({},a,{events:h,pendingEvents:a.pendingEvents.filter(function(a){return a!=b.payload.eventId})});case"UPDATE_SUPERPROPS":return l({},a,{superProps:l({},a.superProps,b.payload.properties)});case"RESET_SUPERPROPS":return l({},a,{superProps:P.superProps});case"SET_BLACKLIST_EVENTNAMES":return l({},a,{blackListedEventNames:b.payload.eventNames});case"START_EVENT_QUEUE":return l({},a,{flush_queue:!1});case"FLUSH_EVENT_QUEUE":var i=a.eventId,j=a.eventName,n=a.events,o=[];return(o=a.queuedEvents.filter(function(b){return-1==a.blackListedEventNames.indexOf(n[b].data.eventName)})).forEach(function(a){n[a].data.refEventId=i,n[a].data.refEventName=j,i=n[a].data.eventId,j=n[a].data.eventName}),l({},a,{eventId:i,eventName:j,flush_queue:!0,pendingEvents:[].concat(m(a.pendingEvents),m(o)),events:n,queuedEvents:P.queuedEvents});default:return a}},S=null,T=null,U={async:1,sync:2},V="",W=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.async,c=JSON.stringify(a);if(b==U.async)if(navigator.sendBeacon)navigator.sendBeacon(V,c),y().dispatch(o(a.eventId));else{var d=new Image;d.src=V+"?data="+c,d.onload=function(){y().dispatch(o(a.eventId))},document.body.appendChild(d),y().dispatch(p(a.eventId,O.loading))}},X=function(){T=y().getState(),S&&T.pendingEvents==S||(S=T.pendingEvents,S.map(function(a){var b=T.events[a];b&&b.status==O.unsent&&W(b.data)}))},Y=function(a){V=a},Z="object"==typeof global&&global&&global.Object===Object&&global,$="object"==typeof self&&self&&self.Object===Object&&self,_=Z||$||Function("return this")(),aa=_.Symbol,ba=Object.prototype,ca=ba.hasOwnProperty,da=ba.toString,ea=aa?aa.toStringTag:void 0,fa=Object.prototype,ga=fa.toString,ha="[object Null]",ia="[object Undefined]",ja=aa?aa.toStringTag:void 0,ka=function(a,b){return function(c){return a(b(c))}}(Object.getPrototypeOf,Object),la="[object Object]",ma=Function.prototype,na=Object.prototype,oa=ma.toString,pa=na.hasOwnProperty,qa=oa.call(Object);h="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var ra=function(a){var b,c=a.Symbol;return"function"==typeof c?c.observable?b=c.observable:(b=c("observable"),c.observable=b):b="@@observable",b}(h),sa={INIT:"@@redux/INIT"},ta=function(){function a(b){var c=b.store,d=void 0===c?{}:c,e=b.blackListed,f=void 0===e?[]:e,g=b.autoRehydrate,h=void 0===g||g;i(this,a),this.store=d,this.blackListed=f,h&&this.rehydrate()}return j(a,[{key:"getWhiteListedKeys",value:function(a,b){var c=this;return Object.keys(a).filter(function(a){return-1==c.blackListed.indexOf(a)})}},{key:"subscribe",value:function(){var a=this,b=this.store.getState();this.getWhiteListedKeys(b,this.blackListed).filter(function(c){return a.prevState[c]!=b[c]}).forEach(function(a){J(a,b[a])}),this.prevState=b}},{key:"rehydrate",value:function(){var a=null,b={},c=this.store.getState();if(this.getWhiteListedKeys(c,this.blackListed).forEach(function(a){K(a)&&(b[a]=K(a))}),b.version&&b.version<N.version){var d=Object.keys(c);setTimeout(function(){d.forEach(function(a){L(a)})},0),a={}}else a=b;this.prevState=a,this.store.dispatch({type:"REHYDRATE",payload:a})}}]),a}(),ua=function(){y().dispatch(s())},va=function(a){var b=a.queuedSuperProps,c=void 0===b?[]:b,d=a.queuedEvents,e=void 0===d?[]:d,f=a.blackList,h=void 0===f?[]:f,i=a.beaconUrl,j=void 0===i?"":i,k=void 0;k=g(R,void 0),x(k);var n=new ta({store:k,blackListed:["pendingEvents","events","superProps","blackListedEventNames","flush_queue","queuedEvents"],autoRehydrate:!0});k.subscribe(function(){n.subscribe(),X()}),Y(j);var o={};c.forEach(function(a){o=l({},o,a)}),z(o),y().dispatch(t(h)),e.map(function(a){B.apply(D,m(a))})},wa=Object.freeze({reset:ua,init:va});window.ub=l({},wa,D)}();